import shutil
import pytest

from service.file_storage import LocalFileStorage

IMAGE_BYTES = b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x006\x00\x00\x006\x08\x06\x00\x00\x00\x8cEj\xdd\x00\x00\x0cMiCCPICC Profile\x00\x00H\x89\x95W\x07XS\xc9\x16\x9e[RIh\x81\x08H\t\xbd\x89"\x08\x04\x90\x12B\x8b  U\x10\x95\x90\x04\x12J\x8c\tA\xc5\x8e,\xab\xe0ZP\x11\x05uEWE\x14]\x0b kE]\xeb\xa2\xd8\xfbbAee]\\\xc5\x86\xca\x9b\x14\xd0\xd5W\xbew\xbeo\xee\xfc9s\xe6?%s\xe7\xce\x00\xa0W\xc3\x97\xc9\xf2P}\x00\xf2\xa5\x05\xf2\xf8\x88\x10\xd6\xf8\xd44\x16\xe9\x11@\x81\x0e\xd0\x03\xa6\x00\xe7\x0b\x142N\\\\4\x802\xd0\xffS^_\x03\x88\xaa\xbf\xec\xa6\xe2\xfav\xfc\xbf\x8a\x81P\xa4\x10\x00\x80\xc4A\x9c)T\x08\xf2!\xde\x07\x00^,\x90\xc9\x0b\x00 \xb2\xa1\xdevZ\x81L\x85\xd3!6\x92\xc3\x00!\x96\xa9p\xb6\x06\x97\xa8p\xa6\x06W\xa9m\x12\xe3\xb9\x10\xef\x00\x80L\xe3\xf3\xe5\xd9\x00\xe86C=\xabP\x90\ryto@\xec.\x15J\xa4\x00\xe8\x91!\x0e\x14\x88\xf9B\x88#!\x1e\x96\x9f?E\x85\xa1\x1dp\xca\xfc\x82\'\xfb\x1f\x9c\x99\x83\x9c|~\xf6 \xd6\xe4\xa2\x16r\xa8D!\xcb\xe3\xcf\xf8?\xcb\xf1\xbf%?O9\xe0\xc3\x016\x9aX\x1e\x19\xaf\xca\x19\xd6\xedF\xee\x94(\x15\xa6A\xdc-\xcd\x8c\x89\x85\xd8\x10\xe2\xb7\x12\xa1\xda\x1eb\x94*VF&i\xecQs\x81\x82\x0bk\x06\x98\x10\xbb\x0b\xf9\xa1Q\x10\x9bC\x1c.\xcd\x8b\x89\xd6\xea3\xb3$\xe1<\x88\xe1\nA\xa7K\nx\x89\xda\xb9\x0bE\x8a\xb0\x04-g\x8d|J|\xec\x00\xce\x92s9\xda\xb9\r|\xb9\xda\xaf\xca\xfe\x8427\x89\xa3\xe5\xbf!\x16\xf1\x06\xf8_\x15\x89\x13S \xa6\x02\x80Q\x0b%\xc91\x10\xebBl\xa4\xc8M\x88\xd2\xd8`6Ebn\xcc\x80\x8d\\\x19\xaf\x8a\xdf\x0eb\xb6H\x1a\x11\xa2\xe1\xc7\xd2\xb3\xe4\xe1\xf1Z{Y\xbeb _\xacT,\xe1\xc5hqU\x8181RS\x1fl\xbb\x80\xaf\x8e\xdf\x04\xe2F\x91\x94\x934\xc0#R\x8c\x8f\x1e\xc8E(\n\r\xd3\xe4\x8e\xb5\x89\xa4I\xda|\xb1{\xb2\x82\x90x\xed\xdc\x1eY^\x9c\xd6\x1e\'\x8b\xf2"Tz\x1b\x88\xcd\x14\x85\t\xda\xb9\xf8\xe8\x02\xb8 5\xfcx\xb4\xac .Q\x13\'\x9e\x91\xc3\x1f\x13\xa7\x89\x07/\x04\xd1\x80\x0bB\x01\x0b(a\xcb\x04S@\x0e\x90\xb4u7u\xc3_\x9a\x91p\xc0\x07r\x90\rD\xc0M\xab\x19\x98\x91\xa2\x1e\x91\xc2g\x02(\x02\x7fB$\x02\x8a\xc1y!\xeaQ\x11(\x84\xfa\x8f\x83Z\xcd\xd3\rd\xa9G\x0b\xd53r\xc1c\x88\xf3A\x14\xc8\x83\xbf\x95\xeaY\xd2Ao\xc9\xe0\x11\xd4H\xbe\xf1.\x80\xb1\xe6\xc1\xa6\x1a\xfbV\xc7\x81\x9ah\xadF9\xc0\xcb\xd2\x1b\xb0$\x86\x11C\x89\x91\xc4p\xa23n\x86\x07\xe2\xfex4|\x06\xc3\xe6\x81\xb3q\xdf\x81h?\xdb\x13\x1e\x13\xda\t\x0f\x08W\t\x1d\x84\x9b\x93%\xc5\xf2\xafb\x19\x0b: \x7f\xb86\xe3\xcc/3\xc6\x1d \xa7\x17\x1e\x82\x07@v\xc8\x8c3q3\xe0\x86\x8f\x82~8x\x10\xf4\xec\x05\xb5\\m\xdc\xaa\xdcY\xff&\xcf\xc1\x0c\xbe\xa8\xb9\xd6\x8e\xe2NA)C(\xc1\x14\xa7\xafg\xea\xba\xe8z\r\xb2\xa8*\xfae}4\xb1f\x0eV\x95;8\xf2\xb5\x7f\xee\x17u\x16\xc2>\xeakKl!\xb6\x17;\x85\x1d\xc3\xce`\x07\xb1&\xc0\xc2\x8e`\xcd\xd8y\xec\x90\n\x0f\xae\xa1G\xea54\xe0-^\x1dO.\xe4\x91|\xe3\x8f\xaf\xf5\xa9\xaa\xa4\xc2\xbd\xde\xbd\xcb\xfd\x83v\x0c\x14\x88\xa6\xab\xf6G\xc0\x9d"\x9b!\x97d\x8b\x0bX\x1c\xb8\xf3\x8bX<\xa9`\xf80\x96\x87\xbb\x87;\x00\xaa\xef\x88f\x9bz\xc9T\x7f\x1f\x10\xe6\xd9\xcf\xba\x05\xd6\x00\x04\xcc\xe8\xef\xef?\xf8Y\x17u\x11\x80\xbd\x87\xe0k~\xeb\xb3\xce\xb1\x13n\x07g\x018\xbdZ\xa0\x94\x17jt\xb8\xeaA\x80\xbb\x81\x1e|\xa3L\x81%\xb0\x05N0#\x0f\xe0\r\xfcA0\x08\x03c@,H\x04\xa9`\x12\xac\xb3\x18\xaeg9\x98\x06f\x81\xf9\xa0\x14\x94\x83e`\x15X\x0b6\x80M`\x1b\xd8\t\xf6\x80&p\x10\x1c\x03\xbf\x82s\xe0"\xb8\nn\xc3\xf5\xd3\t\x9e\x81\x1e\xf0\x1a\xf4!\x08BB\xe8\x08\x031E\xac\x10{\xc4\x15\xf1@\xd8H \x12\x86D#\xf1H*\x92\x81d#RD\x89\xccB\x16 \xe5H\x05\xb2\x16\xd9\x88\xd4!?#\x07\x90c\xc8\x19\xa4\x1d\xb9\x89\xdcG\xba\x90\xbf\x91\xf7(\x86\xd2P#\xd4\x02u@G\xa0l\x94\x83F\xa1\x89\xe8D4\x1b\x9d\x8a\x16\xa1%\xe8\x12\xb4\n\xadEw\xa0\x8d\xe81\xf4\x1cz\x15\xed@\x9f\xa1\xbd\x18\xc0t0&f\x8d\xb9al\x8c\x8b\xc5biX\x16&\xc7\xe6`eX%V\x8b5`-\xf0\x9f\xbe\x8cu`\xdd\xd8;\x9c\x883p\x16\xee\x06\xd7p$\x9e\x84\x0b\xf0\xa9\xf8\x1c|1\xbe\x16\xdf\x867\xe2\'\xf0\xcb\xf8}\xbc\x07\xffD\xa0\x13\xcc\t\xae\x04?\x02\x8f0\x9e\x90M\x98F(%T\x12\xb6\x10\xf6\x13N\xc2\xb7\xa9\x93\xf0\x9aH$2\x89\x8eD\x1f\xf86\xa6\x12s\x883\x89\x8b\x89\xeb\x88\xbb\x88G\x89\xed\xc4\x87\xc4^\x12\x89dJr%\x05\x90bI|R\x01\xa9\x94\xb4\x86\xb4\x83t\x84t\x89\xd4IzK\xd6![\x91=\xc8\xe1\xe44\xb2\x94\\L\xae$o\'\x1f&_"?!\xf7Q\xf4)\xf6\x14?J,EH\x99AYJ\xd9Li\xa1\\\xa0tR\xfa\xa8\x06TGj\x005\x91\x9aC\x9dO\xad\xa26POR\xefP_\xea\xe8\xe8\xd8\xe8\xf8\xea\x8c\xd3\x91\xe8\xcc\xd3\xa9\xd2\xd9\xadsZ\xe7\xbe\xce;\x9a!\xcd\x85\xc6\xa5\xa5\xd3\x94\xb4%\xb4\xad\xb4\xa3\xb4\x9b\xb4\x97t:\xdd\x81\x1eLO\xa3\x17\xd0\x97\xd0\xeb\xe8\xc7\xe9\xf7\xe8ou\x19\xba\xc3uy\xbaB\xdd\xb9\xba\xd5\xba\x8d\xba\x97t\x9f\xebQ\xf4\xec\xf58z\x93\xf4\x8a\xf4*\xf5\xf6\xea]\xd0\xeb\xd6\xa7\xe8;\xe8s\xf5\xf9\xfas\xf4\xab\xf5\x0f\xe8_\xd7\xef5`\x18\x8c4\x885\xc87Xl\xb0\xdd\xe0\x8c\xc1SC\x92\xa1\x83a\x98\xa1\xd0\xb0\xc4p\x93\xe1q\xc3\x87\x0c\x8ca\xcb\xe02\x04\x8c\x05\x8c\xcd\x8c\x93\x8cN#\xa2\x91\xa3\x11\xcf(\xc7\xa8\xdch\xa7Q\x9bQ\x8f\xb1\xa1\xf1(\xe3d\xe3\xe9\xc6\xd5\xc6\x87\x8c;\x98\x18\xd3\x81\xc9c\xe61\x972\xf70\xaf1\xdf\x0f\xb1\x18\xc2\x19"\x1a\xb2hH\xc3\x90KC\xde\x98\x0c5\t6\x11\x99\x94\x99\xec2\xb9j\xf2\xde\x94e\x1af\x9ak\xba\xdc\xb4\xc9\xf4\xae\x19n\xe6b6\xcel\x9a\xd9z\xb3\x93f\xddC\x8d\x86\xfa\x0f\x15\x0c-\x1b\xbag\xe8-s\xd4\xdc\xc5<\xde|\xa6\xf9&\xf3\xf3\xe6\xbd\x16\x96\x16\x11\x162\x8b5\x16\xc7-\xba-\x99\x96\xc1\x969\x96+-\x0f[vY1\xac\x02\xad$V+\xad\x8eX\xfd\xc12fqXy\xac*\xd6\tV\x8f\xb5\xb9u\xa4\xb5\xd2z\xa3u\x9bu\x9f\x8d\xa3M\x92M\xb1\xcd.\x9b\xbb\xb6T[\xb6m\x96\xedJ\xdbV\xdb\x1e;+\xbb\xb1v\xb3\xec\xea\xedn\xd9S\xec\xd9\xf6b\xfb\xd5\xf6\xa7\xec\xdf88:\xa48|\xef\xd0\xe4\xf0\xd4\xd1\xc4\x91\xe7X\xe4X\xefx\xc7\x89\xee\x14\xe44\xd5\xa9\xd6\xe9\x8a3\xd1\x99\xed\x9c\xeb\xbc\xce\xf9\xa2\x0b\xea\xe2\xe5"v\xa9v\xb9\xe0\x8a\xbaz\xbbJ\\\xd7\xb9\xb6\x0f#\x0c\xf3\x1d&\x1dV;\xec\xba\x1b\xcd\x8d\xe3V\xe8V\xefv\x7f8sx\xf4\xf0\xe2\xe1M\xc3\x9f\x8f\xb0\x1b\x916b\xf9\x88S#>\xb9{\xb9\xe7\xb9ov\xbf=\xd2p\xe4\x98\x91\xc5#[F\xfe\xed\xe1\xe2!\xf0\xa8\xf6\xb8\xe2I\xf7\x0c\xf7\x9c\xeb\xd9\xec\xf9b\x94\xeb(\xd1\xa8\xf5\xa3nx1\xbc\xc6z}\xef\xd5\xea\xf5\xd1\xdb\xc7[\xee\xdd\xe0\xdd\xe5c\xe7\x93\xe1S\xe3s\x9dm\xc4\x8ec/f\x9f\xf6%\xf8\x86\xf8\xce\xf5=\xe8\xfb\xce\xcf\xdb\xaf\xc0o\x8f\xdf_\xfen\xfe\xb9\xfe\xdb\xfd\x9f\x8ev\x1c-\x1a\xbdy\xf4\xc3\x00\x9b\x00~\xc0\xc6\x80\x8e@V`F\xe0\x8f\x81\x1dA\xd6A\xfc\xa0\xda\xa0\x07\xc1\xb6\xc1\xc2\xe0-\xc1O8\xce\x9c\x1c\xce\x0e\xce\xf3\x10\xf7\x10y\xc8\xfe\x907\\?\xeel\xee\xd1P,4"\xb4,\xb4-\xcc0,)lm\xd8\xbdp\x9b\xf0\xec\xf0\xfa\xf0\x9e\x08\xaf\x88\x99\x11G#\t\x91Q\x91\xcb#\xaf\xf3,x\x02^\x1d\xafg\x8c\xcf\x98\xd9cND\xd1\xa2\x12\xa2\xd6F=\x88v\x89\x96G\xb7\x8cE\xc7\x8e\x19\xbbb\xec\x9d\x18\xfb\x18iLS,\x88\xe5\xc5\xae\x88\xbd\x1b\xe7\x1875\xee\x97q\xc4qq\xe3\xaa\xc7=\x8e\x1f\x19?+\xfeT\x02#ar\xc2\xf6\x84\xd7\x89!\x89K\x13o\'9%)\x93Z\x93\xf5\x92\xd3\x93\xeb\x92\xdf\xa4\x84\xa6T\xa4t\x8c\x1f1~\xf6\xf8s\xa9f\xa9\x92\xd4\xe64RZr\xda\x96\xb4\xde\ta\x13VM\xe8L\xf7J/M\xbf6\xd1q\xe2\xf4\x89g&\x99M\xca\x9bth\xb2\xded\xfe\xe4\xbd\x19\x84\x8c\x94\x8c\xed\x19\x1f\xf8\xb1\xfcZ~o&/\xb3&\xb3G\xc0\x15\xac\x16<\x13\x06\x0bW\n\xbbD\x01\xa2\n\xd1\x93\xac\x80\xac\x8a\xac\xa7\xd9\x01\xd9+\xb2\xbb\xc4A\xe2Jq\xb7\x84+Y+y\x91\x13\x99\xb3!\xe7Mnl\xee\xd6\xdc\xfe\xbc\x94\xbc]\xf9\xe4\xfc\x8c\xfc\x03RCi\xae\xf4\xc4\x14\xcb)\xd3\xa7\xb4\xcb\\e\xa5\xb2\x8e\xa9~SWM\xed\x91G\xc9\xb7(\x10\xc5DEs\x81\x11<\xb0\x9fW:)\xbfS\xde/\x0c,\xac.|;-y\xda\xde\xe9\x06\xd3\xa5\xd3\xcf\xcfp\x99\xb1h\xc6\x93\xa2\xf0\xa2\x9ff\xe23\x053[gY\xcf\x9a?\xeb\xfel\xce\xec\x8ds\x909\x99sZ\xe7\xda\xce-\x99\xdb9/b\xde\xb6\xf9\xd4\xf9\xb9\xf3\x7f+v/\xae(~\xb5 eAK\x89E\xc9\xbc\x92\x87\xdfE|W_\xaa[*/\xbd\xfe\xbd\xff\xf7\x1b\x16\xe2\x0b%\x0b\xdb\x16y.Z\xb3\xe8S\x99\xb0\xecl\xb9{ye\xf9\x87\xc5\x82\xc5g\x7f\x18\xf9C\xd5\x0f\xfdK\xb2\x96\xb4-\xf5^\xba~\x19q\x99t\xd9\xb5\xe5A\xcb\xb7U\x18T\x14U<\\1vE\xe3J\xd6\xca\xb2\x95\xafVM^u\xa6rT\xe5\x86\xd5\xd4\xd5\xca\xd5\x1dU\xd1U\xcdk\xec\xd6,[\xf3a\xadx\xed\xd5\xea\x90\xea]5\xe65\x8bj\xde\xac\x13\xae\xbb\xb4>x}\xc3\x06\x8b\r\xe5\x1b\xde\xff(\xf9\xf1\xc6\xc6\x88\x8d\x8d\xb5\x0e\xb5\x95\x9b\x88\x9b\n7=\xde\x9c\xbc\xf9\xd4O\xec\x9f\xea\xb6\x98m)\xdf\xf2q\xabtk\xc7\xb6\xf8m\'\xea|\xea\xea\xb6\x9bo_Z\x8f\xd6+\xeb\xbbv\xa4\xef\xb8\xb83tgs\x83[\xc3\xc6]\xcc]\xe5\xbb\xc1n\xe5\xee?~\xce\xf8\xf9\xda\x9e\xa8=\xad{\xd9{\x1b\xf6\xd9\xef\xab\xd9\xcf\xd8_\xd6\x884\xceh\xeci\x127u4\xa76\xb7\x1f\x18s\xa0\xb5\xc5\xbfe\xff/\xc3\x7f\xd9z\xd0\xfa`\xf5!\xe3CK\x0fS\x0f\x97\x1c\xee?Rt\xa4\xf7\xa8\xech\xf7\xb1\xecc\x0f[\'\xb7\xde>>\xfe\xf8\x95\x13\xe3N\xb4\x9d\x8c:y\xfa\xd7\xf0_\x8f\x9f\xe2\x9c:r:\xe0\xf4\xc13~g\x0e\x9ce\x9fm:\xe7}\xae\xf1\xbc\xd7\xf9\xfd\xbfy\xfd\xb6\xbf\xcd\xbb\xad\xf1\x82\xcf\x85\xe6\x8b\xbe\x17[\xdaG\xb7\x1f\xbe\x14t\xe9\xd8\xe5\xd0\xcb\xbf^\xe1]9w5\xe6j\xfb\xb5\xa4k7\xae\xa7_\xef\xb8!\xbc\xf1\xf4f\xde\xcd\x17\xb7\no\xf5\xdd\x9ew\x87p\xa7\xec\xae\xfe\xdd\xca{\xe6\xf7j\x7fw\xfe}W\x87w\xc7\xa1\xfb\xa1\xf7\xcf?Hxp\xfb\xa1\xe0\xe1\xb3G\x8aG\x1f:K\x1e\xd3\x1fW>\xb1zR\xf7\xd4\xe3\xe9\xc1\xae\xf0\xae\x8b\x7fL\xf8\xa3\xf3\x99\xecY_w\xe9\x9f\x06\x7f\xd6<wz\xbe\xef\xaf\xe0\xbf\xce\xf7\x8c\xef\xe9|!\x7f\xd1\xff\xf7\xe2\x97\xa6/\xb7\xbe\x1a\xf5\xaa\xb57\xae\xf7\xde\xeb\xfc\xd7}o\xca\xde\x9a\xbe\xdd\xf6\x8e\xfd\xee\xd4\xfb\x94\xf7O\xfa\xa6} }\xa8\xfa\xe8\xfc\xb1\xe5S\xd4\xa7;\xfd\xf9\xfd\xfd2\xbe\x9c\xaf>\n`\xb0\xa1YY\x00\xfc\xbd\x15\x00z*\x00\x0cx\x86\xa0N\xd0\xdc\xf3\xd4\x82h\xee\xa6j\x04\xfe\x13\xd6\xdc\x05\xd5\xe2\r@\x03\xecT\xc7u\xeeQ\x00v\xc3\xe60\x0fr\xc3^uTO\x0c\x06\xa8\xa7\xe7`\xd3\x8a"\xcb\xd3C\xc3E\x837\x1e\xc2\xdb\xfe\xfe\x97\x16\x00\x90Z\x00\xf8(\xef\xef\xef[\xd7\xdf\xffq3\x0c\xf6&\x00G\xa7j\xee\x97*!\xc2\xbb\xc1\x8f\x81*t\xd5d\xe2"\xf0\x95\xfc\x0b\xd2\xbd\x80\x82\xdb\xbeC?\x00\x00\x00\x8aeXIfMM\x00*\x00\x00\x00\x08\x00\x04\x01\x1a\x00\x05\x00\x00\x00\x01\x00\x00\x00>\x01\x1b\x00\x05\x00\x00\x00\x01\x00\x00\x00F\x01(\x00\x03\x00\x00\x00\x01\x00\x02\x00\x00\x87i\x00\x04\x00\x00\x00\x01\x00\x00\x00N\x00\x00\x00\x00\x00\x00\x00\x90\x00\x00\x00\x01\x00\x00\x00\x90\x00\x00\x00\x01\x00\x03\x92\x86\x00\x07\x00\x00\x00\x12\x00\x00\x00x\xa0\x02\x00\x04\x00\x00\x00\x01\x00\x00\x006\xa0\x03\x00\x04\x00\x00\x00\x01\x00\x00\x006\x00\x00\x00\x00ASCII\x00\x00\x00Screenshot/\xea\x96\xb2\x00\x00\x00\tpHYs\x00\x00\x16%\x00\x00\x16%\x01IR$\xf0\x00\x00\x01\xd4iTXtXML:com.adobe.xmp\x00\x00\x00\x00\x00<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="XMP Core 5.4.0">\n   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n      <rdf:Description rdf:about=""\n            xmlns:exif="http://ns.adobe.com/exif/1.0/">\n         <exif:PixelXDimension>54</exif:PixelXDimension>\n         <exif:UserComment>Screenshot</exif:UserComment>\n         <exif:PixelYDimension>54</exif:PixelYDimension>\n      </rdf:Description>\n   </rdf:RDF>\n</x:xmpmeta>\n\xb8\xbe\xe9Y\x00\x00\x00\x1ciDOT\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x1b\x00\x00\x00(\x00\x00\x00\x1b\x00\x00\x00\x1b\x00\x00\x00\x91\'{\xe3\x9f\x00\x00\x00]IDATh\x05\xec\xd2\xb1\x11\x00 \x0c\xc3@\xd8\x7fg\xc2\n*\x05\'j\x17\x8e\x9f=sf}\xf8v\x87=\xa6\x9a\xd8c`+\xb1\xc4$\x0b\xf4\x15%\x10\xb8Fbx*I01\t\x04\xae\x91\x18\x9eJ\x12LL\x02\x81k$\x86\xa7\x92\x04\x13\x93@\xe0\x1a\x89\xe1\xa9$\xc1\xc4$\x10\xb8\xc6\xb7b\x17\x00\x00\xff\xff\x8cy\xb6\xdc\x00\x00\x00[IDAT\xed\xd2\xb1\x11\x00 \x0c\xc3@\xd8\x7fg\xc2\n*\x05\'j\x17\x8e\x9f=sf}\xf8v\x87=\xa6\x9a\xd8c`+\xb1\xc4$\x0b\xf4\x15%\x10\xb8Fbx*I01\t\x04\xae\x91\x18\x9eJ\x12LL\x02\x81k$\x86\xa7\x92\x04\x13\x93@\xe0\x1a\x89\xe1\xa9$\xc1\xc4$\x10\xb8\xc6\xb7b\x17\xa3:\xd7)K%\x9e\xc2\x00\x00\x00\x00IEND\xaeB`\x82'


TEST_FILE_NAME ='test.png'


@pytest.fixture(scope='session')
def images_dir(tmpdir_factory):
    image_dir = tmpdir_factory.mktemp('testdir')
    yield image_dir
    shutil.rmtree(str(image_dir))


@pytest.fixture(scope='module')
def image_in_dir(images_dir):
    image_file = images_dir.join(TEST_FILE_NAME)
    image_file.write('')
    with open(image_file, 'wb') as f:
        f.write(IMAGE_BYTES)
    yield str(images_dir)


@pytest.fixture(scope='module')
def local_storage(images_dir, image_in_dir):
    storage = LocalFileStorage(images_path=images_dir)
    return storage
